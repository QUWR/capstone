# 🍳 하루 한끼 (One Meal a Day)

**AI 챗봇을 통해 사용자가 가진 식재료를 기반으로 맞춤형 레시피를 추천해주는 서비스입니다.** 냉장고에 있는 재료로 무엇을 만들어 먹을지 고민하는 사용자의 문제를 해결하고, 쉽고 즐거운 요리 경험을 제공하는 것을 목표로 합니다.

<br>

## 📌 프로젝트 소개

'하루 한끼'는 사용자가 가지고 있는 요리 재료 사진과 추가적인 요구사항을 입력하면, 이를 기반으로 AI 챗봇이 개인 맞춤형 레시피를 추천해주는 서비스입니다. 냉장고 속 잠자는 식재료를 활용하여 사용자에게 쉽고 재미있는 요리 경험을 제공하고, 효율적인 식단 관리를 돕고자 기획되었습니다.

---

## 📅 개발 기간

2025.03 ~ 2025.06

---

## 👨‍💻 개발자 소개

* **박연준 (백엔드 개발)**
    * **역할:** 전체 백엔드 시스템 설계 및 개발 총괄
    * **주요 기여:** JWT 기반 인증/인가 시스템, AI 챗봇 연동 아키텍처(WebSocket -> REST API) 설계 및 구현, 글로벌 예외 처리 시스템 구축

* **이성민 (프론트엔드/AI 연동)**
    * **역할:** 사용자 인터페이스(UI/UX) 개발, AI 모델과의 통신 연동
    * **주요 기여:** React 기반 웹/모바일 UI 구현, AI 모델 API 호출 및 데이터 처리

* **최윤제 (AI 모델 개발/데이터 과학)**
    * **역할:** 레시피 추천 AI 모델 개발, 데이터 전처리 및 학습
    * **주요 기여:** 사용자 요구사항 분석 AI 모델 개발, 추천 알고리즘 고도화

* **김지훈 (AI 모델 개발/데이터 과학)**
    * **역할:** 재료 인식 AI 모델 개발, 데이터 전처리 및 학습
    * **주요 기여:** 식재료 인식 분석 AI 모델 개발, 추천 알고리즘 고도화

---

## 💻 개발 환경

* **IDE:** IntelliJ IDEA, VS Code
* **버전 관리:** Git, GitHub

---

## 🛠️ 기술 스택

| 구분 | 기술 | 설명 |
| :--- | :--- | :--- |
| **Backend** | Java 17 | 서비스 핵심 로직 구현 |
| | Spring Boot 3.x | 빠르고 쉬운 웹 애플리케이션 개발 프레임워크 |
| | Spring Security | 강력한 인증 및 인가 프레임워크 |
| | JPA (Hibernate) | 객체-관계 매핑 (ORM)을 통한 데이터베이스 제어 |
| | RestTemplate | 외부 AI 서버와의 RESTful API 통신 |
| **Database** | MySQL 8.0 | 관계형 데이터베이스 관리 시스템 |
| **Security**| JWT (JSON Web Token) | 사용자 인증 및 정보 교환을 위한 토큰 |
| **Cloud/Infra** | AWS (EC2, RDS) | 클라우드 기반 서버 및 데이터베이스 운영 환경 |
| **AI** | Python, TensorFlow/PyTorch | AI 모델 개발 및 운영 |

---

## ✨ 주요 기능

-   **AI 기반 맞춤 레시피 추천:** 사용자가 입력한 식재료와 요구사항(알러지, 선호 메뉴 등)을 AI 챗봇이 분석하여 개인에게 최적화된 레시피를 제안합니다.
-   **대화형 챗봇 인터페이스:** 사용자와 AI 간의 자연스러운 대화 흐름을 통해 레시피를 추천받고 궁금증을 해결할 수 있습니다.
-   **안전한 사용자 인증/인가:** JWT 기반 인증 시스템을 통해 안전하게 로그인하고 개인 레시피 북 관리 등 맞춤형 서비스를 이용할 수 있습니다.
-   **레시피 검색 및 저장:** 추천받은 레시피나 원하는 레시피를 검색하고 '내 레시피북'에 저장하여 편리하게 관리할 수 있습니다.
-   **식재료 사진 분석:**  사용자가 업로드한 식재료 사진을 분석하여 보유 재료를 자동으로 인식합니다.

---

## 💡 프로젝트 아키텍처

<img width="1506" height="612" alt="image" src="https://github.com/user-attachments/assets/118945d7-0b19-47a1-b038-f4e78dba2279" />



### **핵심 구현 내용 (백엔드)**

1.  **JWT 기반 인증 시스템 심화 구현**
    * Spring Security의 `UsernamePasswordAuthenticationFilter`를 상속받은 **커스텀 `LoginFilter`**를 구현하여 로그인 요청을 가로채고, 인증 성공 시 Access Token과 Refresh Token을 직접 생성하여 응답 헤더에 반환했습니다.
    * 로그인 이후의 모든 API 요청은 **`JwtAuthorizationFilter`**에서 토큰 유효성을 검증하고, `CustomUserDetails`를 통해 사용자 정보를 SecurityContextHolder에 등록하여 인가된 사용자만 리소스에 접근하도록 제어했습니다.

2.  **AI 챗봇 연동 아키텍처 개선 (WebSocket → REST API)**
    * **문제 상황:** 초기에는 AI 챗봇의 실시간성을 위해 웹소켓으로 구현했으나, 대화 데이터에서 레시피 재료, 요리 순서 등 **정형화된 정보를 추출하여 DB에 저장하고 관리하는 데 어려움**이 있었습니다.
    * **해결 과정:** 이 챗봇이 '사용자 요청 → AI 응답'이라는 명확한 흐름을 가진다는 본질에 집중, 실시간성보다 **데이터의 정합성과 구조화된 저장이 더 중요하다고 판단**하여 통신 방식을 **REST API (RestTemplate)로 전환**했습니다.
    * **결과:** 이 구조 변경을 통해 사용자 정보와 AI 응답 데이터를 효과적으로 DB에 저장하고, 이를 기반으로 AI 챗봇이 **사용자 맞춤 레시피를 안정적으로 추천하는 핵심 로직을 구현**할 수 있었습니다.

3.  **글로벌 예외 처리 시스템 구축**
    * **`@RestControllerAdvice`**를 활용하여 서비스 전역에서 발생하는 예외를 일관되게 처리하는 글로벌 예외 핸들러를 구현했습니다.
    * 커스텀 에러 코드를 정의하고 규격화된 에러 응답을 반환하도록 설계함으로써, **API의 안정성과 클라이언트의 오류 처리 효율성을 높였습니다.**

---

## 📋 API 명세

| Method | URI | 설명 |
| :--- | :--- | :--- |
| **POST** | `/api/auth/register` | 회원가입 |
| **POST** | `/api/auth/login` | 로그인 (JWT 발급) |
| **GET** | `/api/mypage` | 마이페이지 정보 조회 |
| **POST** | `/api/mypage` | 마이페이지 정보 업데이트 |
| **POST** | `/api/chat` | AI 챗봇 레시피 추천 요청 |
| **GET** | `/api/recipe/{recipeId}/assistence` | 실시간 요리 어시스턴스 조회 |
| **GET** | `/api/recipe/{recipeId}/nutrition` | 레시피 영양 정보 조회 |
| **POST** | `/api/recipe/{recipeId}/satisfaction` | 레시피 만족도 평가 제출 |

---

## 📊 ERD (개념적/논리적)

<img width="600" height="450" alt="image" src="https://github.com/user-attachments/assets/84d9258c-9fa1-4fa1-8c4a-6bc5d6a982ad" />
