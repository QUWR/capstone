# 🍳 하루 한끼 (One Meal a Day)

**AI 챗봇을 통해 사용자가 가진 식재료를 기반으로 맞춤형 레시피를 추천해주는 서비스입니다.** 냉장고에 있는 재료로 무엇을 만들어 먹을지 고민하는 사용자의 문제를 해결하고, 쉽고 즐거운 요리 경험을 제공하는 것을 목표로 합니다.

<br>

## ✨ 주요 기능


*사용자가 재료 사진과 '알러지 빼줘' 같은 요구사항을 입력하면, AI 챗봇이 맞춤형 레시피를 카드 형태로 제공하는 모습*

- **AI 기반 맞춤 레시피 추천:** 사용자가 입력한 재료와 요구사항(알러지, 선호 음식 등)을 분석하여 최적의 레시피를 추천합니다.
- **대화형 챗봇 인터페이스:** 직관적인 챗봇 UI를 통해 쉽고 재미있게 레시피를 검색하고 추천받을 수 있습니다.
- **JWT 기반 인증:** 안전한 사용자 인증/인가 시스템을 통해 개인화된 서비스(레시피 저장 등)를 제공합니다.
- **레시피 검색 및 저장:** 추천받은 레시피나 원하는 레시피를 검색하고 '내 레시피북'에 저장하여 언제든 다시 볼 수 있습니다.

<br>

## 🏛️ 시스템 아키텍처



<br>

## 🛠️ 기술 스택

| 구분 | 기술 |
| :--- | :--- |
| **Backend** | Java 17, Spring Boot 3.x, Spring Security |
| **Database** | MySQL 8.0 |
| **Security**| JWT (JSON Web Token) |
| **DevOps** | AWS (EC2, RDS), Git, GitHub |
| **API**| RestTemplate |

<br>

## 💡 핵심 구현 내용

### 1. JWT 인증 시스템 구현

Spring Security의 기본 구조를 확장하여 JWT 기반의 인증/인가 시스템을 구현했습니다.

- 로그인 처리를 위해 Spring Security의 **`UsernamePasswordAuthenticationFilter`를 상속받은 커스텀 `LoginFilter`**를 구현했습니다. 이 필터는 사용자의 로그인 요청을 가로채 인증을 처리하며, 인증 성공 시 **Access Token과 Refresh Token을 직접 생성하여 응답 헤더에 담아 반환**하는 역할을 담당합니다.
- 로그인 이후의 모든 API 요청에 대해서는 **별도의 `JwtAuthorizationFilter`**를 구현하여, 요청 헤더에 담긴 Access Token의 유효성을 검증하고 인가된 사용자만 리소스에 접근하도록 제어했습니다.

### 2. AI 서버 연동 아키텍처 개선 (WebSocket → REST API)

- **문제 상황:** 초기에는 AI 챗봇의 실시간성을 고려해 **웹소켓(WebSocket)**으로 구현했으나, 채팅 데이터에서 레시피의 재료, 요리 순서 등 정형화된 정보를 추출하고 DB에 저장하는 데 어려움이 있었습니다.
- **해결 과정:** 이 챗봇이 다자간 대화가 아닌, '사용자 요청 → AI 응답'이라는 명확한 흐름을 가진다는 점에 집중했습니다. 이에 실시간 통신보다 **데이터의 정합성과 구조화된 저장이 더 중요하다고 판단**, 통신 방식을 **REST API (RestTemplate)로 전환**하는 결정을 내렸습니다.
- **결과:** 이 구조 변경을 통해 사용자 정보와 AI 응답 데이터를 효과적으로 DB에 저장하고, 이를 기반으로 AI 챗봇이 **사용자 맞춤 레시피를 추천하는 핵심 로직을 안정적으로 구현**할 수 있었습니다.

### 3. 글로벌 예외 처리

**`@RestControllerAdvice`**를 활용하여 서비스 전역에서 발생하는 예외를 일관되게 처리하는 글로벌 예외 핸들러를 구현했습니다. 커스텀 에러 코드를 정의하여 규격화된 에러 응답을 반환하도록 설계함으로써, API의 안정성과 디버깅 효율성을 높였습니다.

<br>
